import React, { useEffect, useRef, useState } from "react";

const NotiButton = ({ notiStatus, fillColor="white", className }) => {
  const componentDidMount = useRef(false);
  const [actualFill, setActualFill] = useState(null);

  useEffect(() => {
    if (!componentDidMount) {
      componentDidMount.current = true;
      return;
    }

    // componentDidUpdate
    setActualFill("yellow");
    setTimeout(() => setActualFill(fillColor), 1000);
  }, [notiStatus]);

  useEffect(() => {
    setActualFill(fillColor);
  }, [fillColor]);
  return (
    <>
      {!notiStatus.on ? (
        <svg
          width="45"
          height="45"
          viewBox="0 0 45 45"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className={className}
        >
          <path
            d="M36.0009 19.0035C36.0009 12.9585 31.9134 7.86602 26.3521 6.34352C26.072 5.6511 25.5914 5.05813 24.9721 4.64059C24.3528 4.22306 23.6228 4 22.8759 4C22.1289 4 21.399 4.22306 20.7797 4.64059C20.1603 5.05813 19.6798 5.6511 19.3996 6.34352C18.3609 6.62847 17.3614 7.04098 16.424 7.57165L19.2215 10.3673C20.6471 9.76383 22.2 9.52281 23.7415 9.66575C25.283 9.80869 26.7651 10.3311 28.0554 11.1864C29.3458 12.0417 30.4043 13.2032 31.1364 14.5673C31.8684 15.9313 32.2514 17.4554 32.2509 19.0035V23.3966L36.0009 27.1466V19.0035ZM6.32902 32.9423L9.75089 27.8104V19.0035C9.75089 17.0348 10.184 15.1673 10.9621 13.491L6.55027 9.07914C6.20872 8.72552 6.01973 8.25189 6.024 7.76027C6.02827 7.26865 6.22547 6.79838 6.57311 6.45074C6.92075 6.1031 7.39102 5.9059 7.88264 5.90163C8.37426 5.89736 8.84789 6.08635 9.20152 6.42789L39.2015 36.4279C39.5431 36.7815 39.7321 37.2551 39.7278 37.7468C39.7235 38.2384 39.5263 38.7087 39.1787 39.0563C38.831 39.4039 38.3608 39.6011 37.8691 39.6054C37.3775 39.6097 36.9039 39.4207 36.5503 39.0791L33.3496 35.8785H29.3728C29.147 37.4406 28.366 38.869 27.1728 39.9022C25.9797 40.9353 24.4542 41.5039 22.8759 41.5039C21.2976 41.5039 19.7721 40.9353 18.579 39.9022C17.3858 38.869 16.6048 37.4406 16.379 35.8785H7.90027C7.46996 35.8852 7.05061 35.7428 6.71339 35.4754C6.34005 35.181 6.09261 34.7557 6.02124 34.2857C5.94986 33.8157 6.05989 33.3342 6.32902 32.9423ZM11.3821 32.1285H29.6015L13.8703 16.3973C13.6253 17.2443 13.5009 18.1217 13.5009 19.0035V28.3785C13.501 28.7489 13.3914 29.111 13.1859 29.4191L11.3821 32.1285ZM20.2246 35.8785C20.4179 36.4279 20.7769 36.9037 21.2522 37.2403C21.7274 37.5769 22.2954 37.7577 22.8778 37.7577C23.4601 37.7577 24.0281 37.5769 24.5034 37.2403C24.9786 36.9037 25.3376 36.4279 25.5309 35.8785H20.2246Z"
            fill={actualFill ?? "#525252"}
          />
        </svg>
      ) : (
        <svg
          width="36"
          height="35"
          viewBox="0 0 36 35"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className={className}
        >
          <path
            d="M14.0811 2.18706C14.3716 1.54087 14.87 0.987482 15.5122 0.597826C16.1545 0.208169 16.9114 0 17.686 0C18.4606 0 19.2176 0.208169 19.8598 0.597826C20.5021 0.987482 21.0005 1.54087 21.291 2.18706C24.1663 2.89868 26.7025 4.44004 28.5101 6.57443C30.3177 8.70882 31.2968 11.3182 31.2969 14.0018V22.2207L34.8591 27.0292C35.0545 27.2927 35.1667 27.599 35.1837 27.9154C35.2008 28.2319 35.1221 28.5465 34.9561 28.8258C34.79 29.1052 34.5428 29.3387 34.2408 29.5015C33.9388 29.6642 33.5934 29.7502 33.2413 29.7502H24.4234C24.1893 31.2079 23.3794 32.541 22.142 33.5052C20.9047 34.4693 19.3228 35 17.686 35C16.0493 35 14.4674 34.4693 13.23 33.5052C11.9927 32.541 11.1828 31.2079 10.9486 29.7502H2.13074C1.77872 29.7502 1.43328 29.6642 1.13129 29.5015C0.829303 29.3387 0.582084 29.1052 0.416012 28.8258C0.24994 28.5465 0.171246 28.2319 0.188325 27.9154C0.205404 27.599 0.317615 27.2927 0.512988 27.0292L4.07515 22.2207V14.0018C4.07515 8.36041 8.31397 3.60791 14.0811 2.18706ZM14.9366 29.7502C15.1375 30.2622 15.5098 30.7057 16.0024 31.0193C16.495 31.333 17.0836 31.5014 17.687 31.5014C18.2904 31.5014 18.879 31.333 19.3716 31.0193C19.8642 30.7057 20.2366 30.2622 20.4374 29.7502H14.9347H14.9366ZM17.686 5.25273C15.1076 5.25273 12.6347 6.17451 10.8115 7.81528C8.98826 9.45605 7.96397 11.6814 7.96397 14.0018V22.7509C7.96406 23.0965 7.85039 23.4345 7.63731 23.722L5.76484 26.2505H29.6053L27.7328 23.722C27.5204 23.4343 27.4074 23.0964 27.4081 22.7509V14.0018C27.4081 11.6814 26.3838 9.45605 24.5606 7.81528C22.7373 6.17451 20.2645 5.25273 17.686 5.25273Z"
            fill={actualFill ?? "#525252"}
          />
        </svg>
      )}
    </>
  );
};

export default NotiButton;
